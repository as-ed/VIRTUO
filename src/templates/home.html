<!DOCTYPE html>
<html lang="en">
	<head>
		<title>VIRTUO - home</title>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<script src="static/script.js"></script>
		<link href="static/style.css" rel="stylesheet">
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Karla&family=Source+Serif+Pro&display=swap" rel="stylesheet">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer">
	</head>
	<body onload="getVolume()">
		<h1>VIRTUO</h1>
		<h4 class="subtitle">Visual Impairment Reading Technology Utilizing Outspoken language</h4>
		<hr>
		{% if books|length > 0 %}
		<h2 class="heading">My Books</h2>
		<table>
			<thead>
				<tr>
					<th>Title</th>
					<th>Author</th>
					<th># Pages</th>
					<th>Scanned at</th>
					<th colspan="4">Downloads</th>
					<th>Playback</th>
				</tr>
			</thead>
			<tbody>
			{% for book in books %}
				<tr>
					<td><input type="text" class="metadata" id="title_{{book["id"]}}" value="{{book["title"]}}" placeholder="Enter title" oninput="setTitle('{{book["id"]}}', this)"></td>
					<td><input type="text" class="metadata" id="author_{{book["id"]}}" value="{{book["author"]}}" placeholder="Enter author" oninput="setAuthor('{{book["id"]}}', this)"></td>
					<td>{{book["pages"]}}</td>
					<td>{{book["time"].strftime("%Y-%m-%d\u00a0\u00a0\u00a0%H:%M")}}</td>
					<td><a href="books/{{book["id"]}}/book.txt" target="_blank" download>Text</a></td>
					<td><a href="books/{{book["id"]}}/book.pdf" target="_blank">PDF</a></td>
					<td><a href="books/{{book["id"]}}/book.epub" target="_blank">EPUB</a></td>
					<td><a href="books/{{book["id"]}}/book.mp3" target="_blank" download>MP3</a></td>
					<td><audio controls preload="none" src="books/{{book["id"]}}/book.mp3"></audio></td>
				</tr>
			{% endfor %}
			</tbody>
		</table>
		{% endif %}

		<br>

		<h2 class="heading">System Controls</h2>
		<div class='controls'>
			<button onclick="startScan()">Scan Book</button>
			<button onclick="stopScan()">Stop Scanning</button>
			<div>
				<i class='fa-solid fa-volume-low' style='color: white'></i>
				<input type="range" min="1" max="100" value="50" class="slider" id="volume" onchange="setVolume()">
				<i class='fa fa-volume-up' style='color: white'></i>
				<button onclick="rewind()">Rewind</button>
				<button onclick="togglePause()" id="playpause">Play</button>
				<button onclick="fastForward()">Fast Forward</button>
			</div>
			<select name="voices" id="voiceSelect" onchange="setVoice()">
				{% for voice in voices %}
				<option value="{{voice}}"> {{voice}} </option>
				{% endfor %}
				<option selected value="{{currVoice}}"> {{currVoice}} </option>
			</select>
		</div>
	</body>
</html>
